<!DOCTYPE html>
<html lang="es-ES">

<head>
  <meta charset="utf-8">
  <title>HOME</title>
  <link rel="stylesheet" href="home.css">
</head>

<body>
  <div class="navbar">
    <ul>
      <li><a href="/home">Inicio</a></li>
      <li><a href="/time">Hora</a></li>
      <li class="settings"><a>Configuración ∇</a>
        <ul class="settings-list">
          <a href="/home">conf1</a>
          <a href="/home">conf2</a>
          <a href="/home">conf3</a>
      </li>
    </ul>
    <li style="float:right"><a href="#">Logout</a></li>
    <li style="float:right"><a id="date">00:00</a></li>
    <li style="float:right"><a id="time">00:00</a></li>
    </ul>
  </div>
  <div id="boxes">
  </div>
</body>

<script>
  function refresh() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        timeFuntion(this);
        boxesFuntion(this);
      }
    };
    xhttp.open("GET", "config.xml", true);
    xhttp.send();
  }

  function timeFuntion(xml) {
    var xmlDoc = xml.responseXML;
    var time = xmlDoc.getElementsByTagName("time-um");
    document.getElementById("time").innerHTML = time[0].getElementsByTagName("time")[0].textContent;
    document.getElementById("date").innerHTML = time[0].getElementsByTagName("date")[0].textContent;
  }

  function boxesFuntion(xml) {
    var xmlDoc = xml.responseXML;
    var datalist = xmlDoc.getElementsByTagName("datalist");
    var box = datalist[0].getElementsByTagName("box");
    var txt = "";

    for (var i = 0; i < box.length; i++) {
      txt += "<div class='box'><div class='box-time'>";
      txt += box[i].getElementsByTagName("time")[0].textContent;
      txt += "</div><div class='box-title'>";
      txt += box[i].getElementsByTagName("name")[0].textContent;
      txt += "</div></div>";
    }


    document.getElementById("boxes").innerHTML = txt;
  }


  refresh();
  setInterval(refresh, 1000);
</script>

</html>
