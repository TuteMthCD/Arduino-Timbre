<!DOCTYPE html>
<html lang="es-ES">

<head>
  <meta charset="utf-8">
  <title>HOME</title>
  <!link rel="stylesheet" href="home.css">
  <style media="screen">
  body {
    padding: 0;
    margin: 0;
    font-family: sans-serif;
    background-color: #2c3e50;
  }

  .navbar ul {
    position: fixed;
    width: 100%;
    top: 0;
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
    background-color: #191919;
  }

  .navbar li {
    float: left;
  }

  .navbar li a {
    display: block;
    color: #ecf0f1;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    //border: 0.5px solid #3498db;
    transition: 0.1s;
  }

  .navbar li a:hover {
    background-color: #3498db;
    transition: 0.1s;
  }

  .settings {
    position: fixed;
    display: inline-block;
  }

  .settings-list {
    display: none;
  }

  .settings:hover .settings-list {
    position: relative;
    top: -1px;
    display: block;
  }

  .box {
    position: relative;
    top: 50px;
    float: left;
    height: 180px;
    width: 24%;
    margin: 0.5%;
    border-radius: 12px;
    color: #ecf0f1;
    background: #191919;
    overflow: hidden;
    z-index: -1;
  }

  .box-time {
    transform: translate(-50%, -50%);
    position: absolute;
    top: 50%;
    left: 50%;
    font-size: 250%;
    transition: 0.1;
  }

  .box-title {
    background-color: #2ecc71;
    position: absolute;
    bottom: 0px;
    width: 100%;
    height: 15%;
    text-align: left;
    display: none;
    transition: 0.25;
  }

  .box:hover .box-title {
    display: block;
    transition: 0.25;
  }

  </style>
</head>

<body>
  <div class="navbar">
    <ul>
      <li><a href="/home">Inicio</a></li>
      <li><a href="/time">Hora</a></li>
      <li class="settings"><a>Configuración ∇</a>
        <ul class="settings-list">
          <a href="/home">conf1</a>
          <a href="/home">conf2</a>
          <a href="/home">conf3</a>
      </li>
    </ul>
    <li style="float:right"><a href="#">Logout</a></li>
    <li style="float:right"><a id="date">00:00</a></li>
    <li style="float:right"><a id="time">00:00</a></li>
    </ul>
  </div>
  <div id="boxes">
  </div>
</body>

<script>
  function refresh() {
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        timeFuntion(this);
        boxesFuntion(this);
      }
    };
    xhttp.open("GET", "http://172.16.5.243/response", true);
    xhttp.send();
  }

  function timeFuntion(xml) {
    var xmlDoc = xml.responseXML;
    var time = xmlDoc.getElementsByTagName("time-um");
    document.getElementById("time").innerHTML = time[0].getElementsByTagName("time")[0].textContent;
    document.getElementById("date").innerHTML = time[0].getElementsByTagName("date")[0].textContent;
  }

  function boxesFuntion(xml) {
    var xmlDoc = xml.responseXML;
    var datalist = xmlDoc.getElementsByTagName("datalist");
    var box = datalist[0].getElementsByTagName("box");
    var txt = "";

    for (var i = 0; i < box.length; i++) {
      txt += "<div class='box'><div class='box-time'>";
      txt += box[i].getElementsByTagName("time")[0].textContent;
      txt += "</div><div class='box-title'>";
      txt += box[i].getElementsByTagName("name")[0].textContent;
      txt += "</div></div>";
    }


    document.getElementById("boxes").innerHTML = txt;
  }


  refresh();
  setInterval(refresh, 1000);
</script>

</html>
